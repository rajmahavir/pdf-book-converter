# AI Configuration for PDF Book Converter Project
# Read this BEFORE making any changes

# ======================
# PROJECT CONSTRAINTS
# ======================

# Maximum lines changed per commit (to prevent failures)
MAX_LINES_PER_COMMIT=100

# File protocol compatibility required (no server)
REQUIRES_FILE_PROTOCOL_SUPPORT=true

# Browser storage APIs forbidden (localStorage causes errors)
ALLOW_LOCALSTORAGE=false
ALLOW_SESSIONSTORAGE=false
ALLOW_INDEXEDDB=false

# Standalone mode (no external dependencies beyond CDN)
STANDALONE_MODE=true

# Maximum PDF file size (bytes)
MAX_PDF_SIZE=209715200  # 200MB
WARN_PDF_SIZE=52428800  # 50MB

# ======================
# IMPLEMENTATION RULES
# ======================

# Implementation approach
APPROACH=incremental  # Options: incremental, comprehensive
TESTING_REQUIRED=true
PHASE_BASED_ROLLOUT=true

# Code style preservation
KEEP_EXISTING_PATTERNS=true
ALLOW_REFACTORING=false  # Don't refactor working code

# Feature priorities (1=highest)
PRIORITY_VALIDATION=1
PRIORITY_ERROR_HANDLING=1
PRIORITY_CORE_FEATURES=2
PRIORITY_UI_IMPROVEMENTS=3
PRIORITY_EXPERIMENTAL=4

# ======================
# FAILED FEATURES
# ======================

# These features FAILED in previous attempts - avoid or implement carefully
FAILED_DARK_MODE=true  # localStorage issues
FAILED_PROGRESS_BAR_WITH_STORAGE=true
FAILED_COMPLEX_CSS_VARIABLES=true
FAILED_COMPREHENSIVE_REFACTOR=true

# Reason for failures
DARK_MODE_FAILURE_REASON=localStorage not available in file:// protocol
PROGRESS_BAR_FAILURE_REASON=Part of too-large changeset, untested

# ======================
# WORKING FEATURES
# ======================

# These features WORK and are deployed
WORKING_FILE_SIZE_VALIDATION=true
WORKING_WARNING_MESSAGES=true
WORKING_RESPONSIVE_SCALING=true
WORKING_SRI_HASHES=true
WORKING_IMPROVED_ERRORS=true

# ======================
# BROWSER COMPATIBILITY
# ======================

TARGET_BROWSERS=chrome,firefox,safari,edge
MIN_CHROME_VERSION=90
MIN_FIREFOX_VERSION=88
MIN_SAFARI_VERSION=14
SUPPORT_IE11=false

# File protocol must work
FILE_PROTOCOL_SUPPORT=required

# ======================
# SECURITY
# ======================

# CDN security
USE_SRI_HASHES=true
USE_CROSSORIGIN=true

# External dependencies
ALLOW_NEW_CDN_DEPENDENCIES=false  # Keep minimal

# ======================
# TESTING CHECKLIST
# ======================

TEST_FILE_PROTOCOL=required
TEST_INCOGNITO_MODE=required
TEST_LARGE_FILES=required
TEST_ERROR_STATES=required
TEST_MOBILE_RESPONSIVE=recommended

# ======================
# DOCUMENTATION
# ======================

# Update these files when making changes
UPDATE_README_ON_FEATURES=true
UPDATE_AI_INSTRUCTIONS=true
COMMIT_MESSAGE_FORMAT=detailed  # Include what/why/how

# ======================
# DEPLOYMENT
# ======================

DEPLOYMENT_METHOD=github_pages
MAIN_FILE=pdf-converter-standalone.html
ENTRY_POINT=index.html

# Branch naming
FEATURE_BRANCH_PREFIX=claude/

# ======================
# LESSONS LEARNED
# ======================

LESSON_1=Small incremental changes work better than large comprehensive ones
LESSON_2=localStorage does not work in file:// protocol
LESSON_3=Test after every feature addition
LESSON_4=Keep existing code patterns even if not ideal
LESSON_5=User feedback is more important than perfect code

# ======================
# CHANGE HISTORY
# ======================

LAST_SUCCESSFUL_COMMIT=f1986fb
LAST_FAILED_COMMIT=4fdcfad
LAST_UPDATED=2025-11-06

# Successful change size
SUCCESSFUL_CHANGE_SIZE=60_insertions_11_deletions

# Failed change size
FAILED_CHANGE_SIZE=302_insertions_41_deletions

# ======================
# NEXT STEPS
# ======================

NEXT_RECOMMENDED_PHASE=2
NEXT_SAFE_FEATURES=progress_bar_without_storage,keyboard_hints,zoom_controls
NEXT_RISKY_FEATURES=dark_mode_with_fallback,preferences_system

# ======================
# CRITICAL REMINDERS
# ======================

CRITICAL_1=Always check file:// protocol compatibility
CRITICAL_2=Never use localStorage/sessionStorage
CRITICAL_3=Keep changes under 100 lines
CRITICAL_4=Test before committing
CRITICAL_5=Follow existing code patterns
